function e(a,b){return[a*b[0],a*b[1]]}function f(a,b){return[a[0]+b[0],a[1]+b[1]]}function g(a,b){return[a[0]-b[0],a[1]-b[1]]}function k(a,b){return f(e(b[0],a[0]),e(b[1],a[1]))}function l(a,b){var c=a[0],h=b[0];return[[k(c,h[0]),k(c,h[1])],f(k(a[0],b[1]),a[1])]}function n(a){var b=a[0];a=a[1];return"matrix("+b[0][0]+","+b[0][1]+","+b[1][0]+","+b[1][1]+","+a[0]+","+a[1]+")"}function p(a){return[[a[0].pageX,a[0].pageY],[a[1].pageX,a[1].pageY]]}var q=[[[1,0],[0,1]],[0,0]];
function r(a){this.c=a;this.b=!1;this.a=q;this.f=null;this.h=[0,0];var b=this,c=!1;a.parentNode.addEventListener("touchstart",function(a){var d=a.touches;if(!d)return!1;a.preventDefault();2===d.length?(b.h=p(d),b.b=!0):1==d.length&&(c?(c=!1,b.g()):c=setTimeout(function(){c=!1},300))});a.parentNode.addEventListener("touchmove",function(a){var d=a.touches;if(!d||2!=d.length||!b.b)return!1;a.preventDefault();a=b.h;var d=p(d),c=g(a[1],a[0]),m=g(d[1],d[0]),t=c[0]*c[0]+c[1]*c[1],u=(c[0]*m[0]+c[1]*m[1])/
t,c=(c[0]*m[1]-c[1]*m[0])/t;b.f=[[[u,c],[-c,u]],g(e(.5,f(d[0],d[1])),e(.5,f(a[0],a[1])))];b.c.style.transform=n(l(b.f,b.a))});a.parentNode.addEventListener("touchend",function(){b.b&&(b.a=l(b.f,b.a),b.b=!1)})}
r.prototype.g=function(){if(window.requestAnimationFrame){var a=this.a,b=null,c=this,h=function(d){b||(b=d);d=(d-b)/100;1<d?(c.a=q,c.b=!1,c.c.style.transform=n(c.a)):(c.c.style.transform=n([[f(e(1-d,a[0][0]),e(d,q[0][0])),f(e(1-d,a[0][1]),e(d,q[0][1]))],f(e(1-d,a[1]),e(d,q[1]))]),window.requestAnimationFrame(h))};window.requestAnimationFrame(h)}else this.a=q,this.b=!1,this.c.style.transform=n(this.a)};r.prototype.reset=r.prototype.g;window.Zoom=r;
