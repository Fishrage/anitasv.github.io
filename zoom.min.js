(function() {function f(a,b){return[a*b[0],a*b[1]]}function g(a,b){return[a[0]+b[0],a[1]+b[1]]}function h(a,b){return[a[0]-b[0],a[1]-b[1]]}function k(a,b){return g(f(b[0],a[0]),f(b[1],a[1]))}function l(a,b){var d=a[0],n=b[0];return[[k(d,n[0]),k(d,n[1])],g(k(a[0],b[1]),a[1])]}function m(a){var b=a[0];a=a[1];return'matrix('+b[0][0]+','+b[0][1]+','+b[1][0]+','+b[1][1]+','+a[0]+','+a[1]+')'}function p(a){return[[a[0].pageX,a[0].pageY],[a[1].pageX,a[1].pageY]]}var q=[[[1,0],[0,1]],[0,0]];
function r(a){this.g=a;this.b=!1;this.a=q;this.c=null;this.h=[0,0];var b=this,d=!1;a.on('touchstart',function(a){var c=a.originalEvent.touches;if(!c)return!1;a.preventDefault();2==c.length?(b.h=p(c),b.b=!0):1==c.length&&(d?(d=!1,b.f()):d=setTimeout(function(){d=!1},300))});a.on('touchmove',function(a){var c=a.originalEvent.touches;if(!c||2!=c.length||!b.b)return!1;a.preventDefault();a=b.h;var c=p(c),e=h(a[1],a[0]),d=h(c[1],c[0]),t=e[0]*e[0]+e[1]*e[1],u=(e[0]*d[0]+e[1]*d[1])/t,e=(e[0]*d[1]-e[1]*d[0])/
t;b.c=[[[u,e],[-e,u]],h(f(.5,g(c[0],c[1])),f(.5,g(a[0],a[1])))];b.g.css('transform',m(l(b.c,b.a)))});a.on('touchend',function(){b.b&&(b.a=l(b.c,b.a),b.b=!1)})}r.prototype.f=function(){this.a=q;this.b=!1;this.g.css('transform',m(this.a))};r.prototype.reset=r.prototype.f;window.Zoom=r;})();
