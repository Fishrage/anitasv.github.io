function g(a,b){return[a*b[0],a*b[1]]}function h(a,b){return[a[0]+b[0],a[1]+b[1]]}function l(a,b){return[a[0]-b[0],a[1]-b[1]]}function m(a,b){return h(g(b[0],a[0]),g(b[1],a[1]))}function n(a,b){var c=a[0],d=b[0];return[[m(c,d[0]),m(c,d[1])],h(m(a[0],b[1]),a[1])]}function p(a){var b=a[0];a=a[1];return"matrix("+b[0][0]+","+b[0][1]+","+b[1][0]+","+b[1][1]+","+a[0]+","+a[1]+")"}var t=[[[1,0],[0,1]],[0,0]];
function u(a){function b(b){var c=a.offsetLeft,d=a.offsetTop;return[[b[0].pageX-c,b[0].pageY-d],[b[1].pageX-c,b[1].pageY-d]]}this.c=a;this.b=!1;this.a=t;this.f=null;this.h=[0,0];var c=this,d=!1;a.style["transform-origin"]="0 0";a.parentNode.addEventListener("touchstart",function(a){var q=a.touches;if(!q)return!1;a.preventDefault();2===q.length?(c.h=b(q),c.b=!0):1==q.length&&(d?(d=!1,c.g()):d=setTimeout(function(){d=!1},300))});a.parentNode.addEventListener("touchmove",function(a){var d=a.touches;
if(!d||2!=d.length||!c.b)return!1;a.preventDefault();a=c.h;var d=b(d),k,e=l(a[1],a[0]),r=l(d[1],d[0]),v=e[0]*e[0]+e[1]*e[1];k=(e[0]*r[0]+e[1]*r[1])/v;e=(e[0]*r[1]-e[1]*r[0])/v;k=[[k,e],[-e,k]];c.f=[k,l(d[0],m(k,a[0]))];c.c.style.transform=p(n(c.f,c.a))});a.parentNode.addEventListener("touchend",function(){c.b&&(c.a=n(c.f,c.a),c.b=!1)})}
u.prototype.g=function(){if(window.requestAnimationFrame){var a=this.a,b=null,c=this,d=function(f){b||(b=f);f=(f-b)/100;1<f?(c.a=t,c.b=!1,c.c.style.transform=p(c.a)):(c.c.style.transform=p([[h(g(1-f,a[0][0]),g(f,t[0][0])),h(g(1-f,a[0][1]),g(f,t[0][1]))],h(g(1-f,a[1]),g(f,t[1]))]),window.requestAnimationFrame(d))};window.requestAnimationFrame(d)}else this.a=t,this.b=!1,this.c.style.transform=p(this.a)};u.prototype.reset=u.prototype.g;window.Zoom=u;
