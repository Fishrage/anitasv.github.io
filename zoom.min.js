function e(a,b){return[a*b[0],a*b[1]]}function g(a,b){return[a[0]+b[0],a[1]+b[1]]}function h(a,b){return[a[0]-b[0],a[1]-b[1]]}function k(a,b){return g(e(b[0],a[0]),e(b[1],a[1]))}function m(a,b){var c=a[0],f=b[0];return[[k(c,f[0]),k(c,f[1])],g(k(a[0],b[1]),a[1])]}function n(a){return[[a[0].pageX,a[0].pageY],[a[1].pageX,a[1].pageY]]}var p=[[[1,0],[0,1]],[0,0]];
function q(a){this.h=a;this.b=!1;this.a=p;this.c=null;this.g=[0,0];var b=this,c=!1;a.parent().on("touchstart",function(a){var d=a.originalEvent.touches;if(!d)return!1;a.preventDefault();2===d.length?(b.g=n(d),b.b=!0):1==d.length&&(c?(c=!1,b.f()):c=setTimeout(function(){c=!1},300))});a.parent().on("touchmove",function(a){var d=a.originalEvent.touches;if(!d||2!=d.length||!b.b)return!1;a.preventDefault();a=b.g;var d=n(d),c=h(a[1],a[0]),l=h(d[1],d[0]),t=c[0]*c[0]+c[1]*c[1],u=(c[0]*l[0]+c[1]*l[1])/t,c=
(c[0]*l[1]-c[1]*l[0])/t;b.c=[[[u,c],[-c,u]],h(e(.5,g(d[0],d[1])),e(.5,g(a[0],a[1])))];r(b,m(b.c,b.a))});a.parent().on("touchend",function(){b.b&&(b.a=m(b.c,b.a),b.b=!1)})}function r(a,b){var c=b[0],f=b[1];a.h.css("transform","matrix("+c[0][0]+","+c[0][1]+","+c[1][0]+","+c[1][1]+","+f[0]+","+f[1]+")")}
q.prototype.f=function(){if(window.requestAnimationFrame){var a=this.a,b=null,c=this,f=function(d){b||(b=d);d=(d-b)/100;1<d?(c.a=p,c.b=!1,r(c,c.a)):(r(c,[[g(e(1-d,a[0][0]),e(d,p[0][0])),g(e(1-d,a[0][1]),e(d,p[0][1]))],g(e(1-d,a[1]),e(d,p[1]))]),window.requestAnimationFrame(f))};window.requestAnimationFrame(f)}else this.a=p,this.b=!1,r(this,this.a)};q.prototype.reset=q.prototype.f;window.Zoom=q;
