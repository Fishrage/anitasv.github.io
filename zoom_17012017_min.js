function g(a,b){return[a*b[0],a*b[1]]}function k(a,b){return[a[0]+b[0],a[1]+b[1]]}function l(a,b){return[a[0]-b[0],a[1]-b[1]]}function m(a,b){return k(g(b[0],a[0]),g(b[1],a[1]))}function n(a,b){this.b=a;this.a=b}function p(a){var b=a.b;a=a.a;return"matrix("+b[0][0]+","+b[0][1]+","+b[1][0]+","+b[1][1]+","+a[0]+","+a[1]+")"}function q(a,b){var c=a.b,d=b.b;return new n([m(c,d[0]),m(c,d[1])],k(m(a.b,b.a),a.a))}var u=new n([[1,0],[0,1]],[0,0]);
function v(a){function b(b){var c=a.offsetLeft,d=a.offsetTop;return[[b[0].pageX-c,b[0].pageY-d],[b[1].pageX-c,b[1].pageY-d]]}this.c=a;this.b=!1;this.a=u;this.f=null;this.h=[0,0];var c=this,d=!1;a.style["transform-origin"]="0 0";a.parentNode.addEventListener("touchstart",function(a){var r=a.touches;if(!r)return!1;a.preventDefault();2===r.length?(c.h=b(r),c.b=!0):1==r.length&&(d?(d=!1,c.g()):d=setTimeout(function(){d=!1},300))});a.parentNode.addEventListener("touchmove",function(a){var d=a.touches;
if(!d||2!=d.length||!c.b)return!1;a.preventDefault();a=c.h;var d=b(d),h,e=l(a[1],a[0]),t=l(d[1],d[0]),w=e[0]*e[0]+e[1]*e[1];h=(e[0]*t[0]+e[1]*t[1])/w;e=(e[0]*t[1]-e[1]*t[0])/w;h=[[h,e],[-e,h]];c.f=new n(h,l(d[0],m(h,a[0])));c.c.style.transform=p(q(c.f,c.a))});a.parentNode.addEventListener("touchend",function(){c.b&&(c.a=q(c.f,c.a),c.b=!1)})}
v.prototype.g=function(){if(window.requestAnimationFrame){var a=this.a,b=null,c=this,d=function(f){b||(b=f);f=(f-b)/100;1<f?(c.a=u,c.b=!1,c.c.style.transform=p(c.a)):(c.c.style.transform=p(new n([k(g(1-f,A[0]),g(f,B[0])),k(g(1-f,A[1]),g(f,B[1]))],k(g(1-f,a.a),g(f,u.a)))),window.requestAnimationFrame(d))};window.requestAnimationFrame(d)}else this.a=u,this.b=!1,this.c.style.transform=p(this.a)};v.prototype.reset=v.prototype.g;window.Zoom=v;
